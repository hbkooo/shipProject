# 数据采集模块说明

## 需求

将注册接口和1:N检索接口提交的图片保存下来并定期上传到服务器

## 技术方案

 直接将图片的base64编码串保存在数据库中，上传时将数据库中的图片编码上传。远端服务器接收后返回结果，然后根据返回结果更新本地数据库。

## 实现细节

- 采用Sqlite数据库，创建一个类dataBase用于实现数据库的增(删改查)操作
- 创建一个类dataUpload用于定期上传数据库信息以及维护旧的数据库信息
- 异步周期性（每日凌晨3点）的将数据库表通过Json格式使用HTTP方式上传到服务器

```json
{
    "request_id":"",
    "user_id":"",
    "group_id":"",
    "image_1":"",
    "image_2":"",
    "image_3":"",
    "image_4":"",
    "image_5":""
};
```

- 数据库表设计

|自增id|请求id|组id|图片id|上传状态|图片1|图片2|图片3|图片4|图片5|
|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
|id(primary-key)|Request-id|Group-id|User-id|isUploaded|Image-1|Image-2|Image-3|Image-4|Image-5|

- 异步写数据库
- 可配置服务器域名及端口(配置文件)
- 实现服务器端的接受测试
- 新模块：libFaceData

## TODO

将不同接口的图片存到不同的数据库表中。